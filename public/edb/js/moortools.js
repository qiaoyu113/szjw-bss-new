senvenProvide('moorCall.moortools'), moorCall.moortools.m7BeginLogon = function(o, t, l, e) { var i = localStorage.getItem('szjw_params'); var e = { Monitor: !1, proxy_url: (i ? JSON.parse(i) : {}).proxy_url, extenType: l, password: t, User: o, busyType: e }; moorCall.moortools.m7initPhone(e) }, moorCall.moortools.notifyDialogStayRemain, moorCall.moortools.notifyDialogInterval = '', moorCall.moortools.index = 1, moorCall.moortools.input = function(o) { var t = ''; var l = ''; o == 'transfer' ? (t = "<input type=button value='转接' class='btn' style='margin-left:5px;' onclick=\"softphoneBar.m7exTransfer(m7$('#softphone-input').val())\" />", l = "onKeyDown=\"if(event.keyCode == 13){softphoneBar.m7exTransfer(m7$('#softphone-input').val())}\"") : o == 'consult' && (t = "<input type=button value='咨询'  class='btn' onclick=\"softphoneBar.m7exConsult(m7$('#softphone-input').val())\" />", l = "onKeyDown=\"if(event.keyCode == 13){softphoneBar.m7exConsult(m7$('#softphone-input').val())}\""); var e = m7$('#softphonebar').offsetWidth; var i = m7$('#softphonebar').offsetHeight; var o = m7$('<div></div>'); o.attr('id', 'hollyc5.bgDiv'), o.attr('class', 'dialoutBox'), m7$('#cover').css('display', 'block'), o.css({ width: e + 'px', heigth: i + 'px' }), m7$('#softphonebar').append(o); o = m7$('<div></div>'); o.attr('id', 'hollyc5.msgDiv'), o.attr('align', 'center'), o.attr('class', 'dialoutCenterBox'), o.css({ marginLeft: '-125px', padding: '2px 4px 0px 18px', top: '145px', left: '50%', border: '1px solid#c6c6c6', marginTop: -75 + document.documentElement.scrollTop + 'px', width: '250px', height: '80px' }); t = "<div style='text-align:right'><a href=javascript:moorCall.moortools.close();><img src='../imgs/close_one.png' /></a></div><div style='height:35px;overflow:hidden;text-align:center'><div id='hollyc5.loading.message' style='float:left;color:#666666;padding-left:5px;'><input id='softphone-input' value='' class='ipt' placeholder='请输入手机号或工号' type='text' size='20' class='fl' " + l + ' />' + t + '</div></div>'; o.html(t), m7$('#softphonebar').append(o) }, moorCall.moortools.close = function() { m7$('#cover').css('display', 'none'), moorCall.moortools.notifyDialogInterval != '' && clearInterval(moorCall.moortools.notifyDialogInterval); var o = document.getElementById('hollyc5.bgDiv'); var t = document.getElementById('hollyc5.msgDiv'); t != null && m7$(t).remove(), o != null && m7$(o).remove() }, moorCall.moortools.success = function(o) { var t = m7$('#softphonebar').offsetWidth; var l = m7$('#softphonebar').offsetHeight; var e = m7$('<div></div>'); e.attr('id', 'hollyc5.bgDiv'), e.attr('class', 'dialoutBox'), e.css({ width: t + 'px', height: l + 'px' }), m7$('#cover').css('display', 'block'), m7$('softphonebar').append(e); e = m7$('<div></div>'); e.attr('id', 'hollyc5.msgDiv'), e.attr('align', 'center'), e.attr('class', 'dialoutCenterBox'), e.css({ marginLeft: '-125px', top: '145px', left: '50%', padding: '18px 0px 0px 35px', border: '1px solid #c6c6c6', marginTop: -75 + document.documentElement.scrollTop + 'px', width: '170px', height: '55px' }); o = "<div style='height:30px;overflow:hidden'><img src='../imgs/success.jpg' style='float:left;margin-top:4px;' /><div style='float:left;color:#666666;padding-left:5px;font-size:15px;padding-top:4px'>" + o + "</div><div class='clear1'>&nbsp;</div></div>"; e.html(o), m7$('#softphonebar').append(e) }, moorCall.moortools.loading = function(o, t, l) { var e = m7$('#' + t).offsetWidth; var i = m7$('#' + t).offsetHeight; var a = m7$('<div></div>'); a.attr('id', 'hollyc5.bgDiv'), a.attr('class', 'dialoutBox'), m7$('#cover').css('display', 'block'), a.css({ width: e + 'px', height: i + 'px' }), m7$('#' + t).append(a); a = m7$('<div></div>'); a.attr('id', 'hollyc5.msgDiv'), a.attr('align', 'center'), a.attr('class', 'dialoutCenterBox'), a.css({ padding: '11px 10px 0px 12px', marginLeft: '-125px', top: '145px', left: '50%', border: '1px solid #c6c6c6', marginTop: -75 + document.documentElement.scrollTop + 'px', width: '290px', height: '90px' }); o = "<div style='overflow:hidden;text-align:center'><img src='../imgs/loading.gif' style='margin-top:5px;' /><div id='hollyc5.loading.message' style='color:#666666;padding-left:5px;'>" + o + '</div></div>'; l.type && l.type == 'consult' && (o += '<input type="button" id="cancelConsult"  style="display:none;margin-left:116px" value="取消咨询" class="btn" onclick="javascript:softphoneBar.m7exCancelConsult(' + l.num + ')">'), a.html(o), m7$('#' + t).append(a) }, moorCall.moortools.getDate = function(o) { var t = o.getFullYear(); var l = o.getMinutes(); var e = o.getDate(); var i = o.getHours(); var a = o.getMonth() + 1; var o = o.getSeconds(); return t + '-' + (a > 9 ? a : '0' + a) + '-' + (e > 9 ? e : '0' + e) + ' ' + (i > 9 ? i : '0' + i) + ':' + (l > 9 ? l : '0' + l) + ':' + (o > 9 ? o : '0' + o) }, moorCall.moortools.m7CheckHide = function() { moorCall.moortools.notifyDialogStayRemain <= 0 && moorCall.moortools.m7HideNotify(), moorCall.moortools.notifyDialogStayRemain -= 500 }, moorCall.moortools.m7CheckLoadingHide = function(o) { var t = moorCall.moortools.index++; var t = "正在等待<span style='color:#3fb23f;font-weight:bold'>" + o + "</span>接听，请稍后<span style='font-weight:bold'>(00:" + (t < 10 ? '0' + t : t) + ')</span>'; document.getElementById('hollyc5.loading.message').innerHTML = t, moorCall.moortools.notifyDialogStayRemain <= 0 && moorCall.moortools.m7HideNotify(), moorCall.moortools.notifyDialogStayRemain -= 1e3 }, moorCall.moortools.m7ShowLoading = function(o, t) { moorCall.moortools.notifyDialogStayRemain = 4e4, moorCall.moortools.index = 1, moorCall.moortools.loading('', 'softphonebar', t || {}), moorCall.moortools.notifyDialogInterval = setInterval(function() { moorCall.moortools.m7CheckLoadingHide(o) }, 1e3) }, moorCall.moortools.error = function(o) { var t = m7$('#softphonebar').offsetWidth; var l = m7$('#softphonebar').offsetHeight; var e = m7$('#softphonebar').height(); var i = m7$('body').height(); var a = m7$('#moorCall_minitor').height(); var e = e + a < i ? i + 50 : e + a + 50; var a = m7$('<div></div>'); m7$('#cover').css({ display: 'block', height: e }), a.attr('id', 'hollyc5.bgDiv'), a.attr('class', 'dialoutBox'), a.css({ width: t + 'px', height: l + 'px' }), m7$('#softphonebar').append(a); a = m7$('<div></div>'); a.attr('id', 'hollyc5.msgDiv'), a.attr('align', 'center'), a.attr('class', 'dialoutCenterBox'), a.css({ top: '180px', left: '43%', marginLeft: '-135px', border: '1px solid #c6c6c6', width: '380px', height: '175px' }); o = "<div style='height:27px;overflow:hidden;padding-top:15px;padding-right:10px;text-align: left'><span style='font-weight: bold;font-size: 14px; margin: 20px'>提示</span><div style='float:right'><a href='javascript:moorCall.moortools.close();'><img src='../imgs/close_one.png' style='cursor: pointer;border:0px;' /></a></div></div><div style='height:30px;overflow:hidden;margin-top:20px;padding-left:20px;'><div style='float:left;color:#424242;padding-left:5px;font-size:15px;padding-top:4px'>" + o + "</div></div><div style='clear:both;height:1px;overflow:hidden'>&nbsp;</div><div style='padding-left:230px;padding-top:30px;'><a href='javascript:moorCall.moortools.close();' class='confirm'>确定</a></div>"; a.html(o), m7$('body').append(a) }, moorCall.moortools.initPhoneAgentStatus = function(o) { for (var t = o.split(',').slice(3), l = '', e = 0; e < t.length - 1; e++) { var i = t[e]; var a = i.split(':')[1]; l += '<a href="#" onclick="javascript:phone.m7SetBusy(true, ' + i.split(':')[0].toString() + ', this)" id="userStatus_' + [e + 3] + '"  class="RestDisable userStatus"><span class="ponit"></span>' + a + '<span class="line"></span></a>' }m7$('#phoneConfigStatus').html(l) }, moorCall.moortools.m7ShowSuccess = function(o) { moorCall.moortools.notifyDialogStayRemain = 500, moorCall.moortools.success(o), moorCall.moortools.notifyDialogInterval = setInterval('moorCall.moortools.m7CheckHide()', 500) }, moorCall.moortools.m7HideNotify = function() { moorCall.moortools.close(), clearInterval(moorCall.moortools.notifyDialogInterval) }, moorCall.moortools.m7getUrlVal = function(o) { var t = window.location.search; var l = t.indexOf(o); var o = o.length; if (l == -1) return ''; l += o + 1; o = t.indexOf('&', l); return o == -1 ? t.substring(l) : decodeURIComponent(t.substring(l, o)) }, moorCall.moortools.m7initPhone = function(o) { moorCall.Phone.registerEvent(o) }, moorCall.moortools.m7logout = function() { phone.destroy(!0) }, moorCall.moortools.m7afterPhone = function(o) { o && (softphoneBar = new moorCall.SoftphoneBar(o, 'softphonebar'), callProcessor = new moorCall.callProcessor(o), monitor = new moorCall.Monitor(o)) }
